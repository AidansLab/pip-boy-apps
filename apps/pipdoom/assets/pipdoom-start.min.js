function PipDoomStart(){function cleanup(){g.clear(),buttonHandlerInterval&&(clearInterval(buttonHandlerInterval),buttonHandlerInterval=null,delete buttonHandlerInterval),powerButtonWatch&&(clearWatch(powerButtonWatch),powerButtonWatch=null,delete powerButtonWatch),delete PipDoomStart,process.memory(!0)}function drawStartScreen(){const b=g.theme.fg||'#00FF00';const a=loadImage(PATH_LOGO);a?(g.clear(),g.setColor(b),g.drawImage(a,(g.getWidth()-a.width)/2,(g.getHeight()-a.height)/2-10)):log('Failed to load logo image: ',PATH_LOGO),g.setFont('6x8'),g.setColor(b),g.setFontAlign(0,0),g.drawString('Loading...',g.getWidth()/2,(g.getHeight()+(a?a.height:0))/2+10)}function loadImage(a){try{let c=fs.readFile(a);let b=JSON.parse(c);return{bpp:b.bpp,buffer:atob(b.buffer),height:b.height,transparent:b.transparent,width:b.width}}catch(b){return console.log(a,b),null}}const self={};const PATH_PIP_DOOM='USER/PIP_DOOM/pipdoom.min.js';const PATH_LOGO='USER/PIP_DOOM/LOGO.json';let buttonHandlerInterval=null;let powerButtonWatch=null;return self.run=function(){log('[PIP-DOOM] Main menu loaded...'),drawStartScreen(),setTimeout(()=>{cleanup(),log('[PIP-DOOM] Starting game...'),eval(fs.readFile(PATH_PIP_DOOM))},3e3),powerButtonWatch=setWatch(()=>{cleanup(),E.reboot()},BTN_POWER,{debounce:50,edge:'rising',repeat:!0})},self}PipDoomStart().run()