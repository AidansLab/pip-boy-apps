function PipUIPlus(){function k(){g.clear(),g.setFontMonofonto28(),g.setColor(f),g.setFontAlign(0,-1),g.drawString(w,i,20),g.setFontMonofonto18(),g.setColor(h),g.drawString('Options Menu v'+x,i,55);const j=c*b;const k=e.slice(j,j+b);const l=30;g.setFontMonofonto18().setFontAlign(-1,-1),k.forEach((c,e)=>{const i=100+e*l;const j=50;const k=d[c]?'X':' ';let b=`[ ${k} ] `;switch(c){case'enableSpecialTab':{b+='Enable STATS > SPECIAL tab';break}case'enablePerksTab':{b+='Enable STATS > PERKS tab';break}case'enableRamScan':{b+='Enable RAM Scan (bottom right of OS)';break}case'hideCogIcon':{b+='Hide Cog Icon (top left of OS)';break}case'hideHolotapeIcon':{b+='Hide Holotape Icon (top right of OS)';break}default:{b+=c.charAt(0).toUpperCase()+c.slice(1).replace(/([A-Z])/g,' $1');break}}e===a?g.setColor(f):g.setColor(h),g.drawString(b,j,i)}),g.setFontMonofonto16(),g.setColor(h),g.setFontAlign(0,-1),g.drawString('Press power button to exit',i,z-40)}function D(b){let a=Date.now();if(a-q<C)return;q=a,b===0?t():v(b>0?-1:1)}function F(a){v(a)}function G(){s(),clearInterval(j),j=null,bC.clear(1).flip(),E.reboot()}function H(){const a=[1,5,10,15,20];const b=a.findIndex(a=>a===Pip.brightness);const c=(b+1)%a.length;Pip.brightness=a[c],Pip.updateBrightness()}function I(){try{d=JSON.parse(require('fs').readFileSync(m))}catch(a){print('Error reading options:',a),u()}}function s(){Pip.removeAllListeners(n),Pip.removeAllListeners(o),Pip.removeAllListeners(p),Pip.removeAllListeners(B)}function J(){Pip.on(n,D),Pip.on(o,F),Pip.on(p,H)}function t(){const f=e[c*b+a];if(!f)return;d[f]=!d[f],f==='enableRamScan'&&(global.ui.enableRamScan=d[f]),u(),k()}function u(){require('fs').writeFile(m,JSON.stringify(d))}function v(h){const d=c*b;const f=e.slice(d,d+b).length;const g=Math.floor((e.length-1)/b);a+=h,a<0?c>0?(c--,a=b-1):a=0:a>=f&&(c<g?(c++,a=0):a=f-1),k()}const l={};const w='Pip UI+';const x='3.0.0';const m='USER/PIP_UI_PLUS/options.json';const f=g.theme.fg;const y='#000000';const h=g.blendColor(y,f,.5);const z=g.getHeight();const A=g.getWidth();const i=A/2;const n='knob1';const o='knob2';const p='torch';const B='audioStopped';const C=30;let q=0;let j=null;let r=!1;const b=5;let c=0;let a=0;let d={enableSpecialTab:!1,enablePerksTab:!1,enableRamScan:!1,hideCogIcon:!1,hideHolotapeIcon:!1};const e=Object.keys(d);return l.run=function(){bC.clear(),global.ui&&global.ui.enableRamScan&&(global.ui.enableRamScan=!1),s(),J(),I(),k(),j=setInterval(()=>{const a=BTN_PLAY.read();a&&!r&&t(),r=a},100),setWatch(()=>G(),BTN_POWER,{debounce:50,edge:'rising',repeat:!0})},l}PipUIPlus().run()